var app=angular.module("vendor_registration",["ui.sortable"]);app.service("vendor_registration_service",function(){var a=[];if(""!==vendor_registration_param.form_data){angular.forEach(vendor_registration_param.form_data,function(e,a){vendor_registration_param.form_data[a].partial=e.partial.split("/")[e.partial.split("/").length-1]});a=vendor_registration_param.form_data}return{getField:function(){return a},setField:function(e){a=e}}}),app.controller("postbox_menu",["$scope","vendor_registration_service",function(e,r){e.postboxClass="",e.vendorStoreFieldClass="";var i=r.getField();e.addFormField=function(e,a,t){t.preventDefault();var l=i.length;switch(e){case"selectbox":i.push({id:l,type:e,selecttype:"radio",label:a,hidden:!1,partial:e+".html",required:!1,options:[{value:"option1",label:"Option 1",selected:!1},{value:"option2",label:"Option 2",selected:!0},{value:"option3",label:"Option 3",selected:!1}],cssClass:""});break;case"email":i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"textarea":i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",defaultValue:"",limit:"",required:!1,cssClass:""});break;case"checkbox":i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",defaultValue:"unchecked",required:!1,cssClass:""});break;case"recaptcha":i.push({id:l,type:e,label:a,recaptchatype:"v3",hidden:!1,partial:e+".html",script:"",required:!1});break;case"file":i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",fileSize:"",fileType:[{value:"application/pdf",label:"PDF",selected:!1},{value:"image/jpeg",label:"JPEG",selected:!1},{value:"image/png",label:"PNG",selected:!1},{value:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",label:"DOC",selected:!1},{value:"application/vnd.ms-excel",label:"xls",selected:!1}],required:!1,muliple:!1,cssClass:""});break;case"separator":i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",cssClass:""});break;case"vendor_description":i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",defaultValue:"",limit:"",required:!1,cssClass:""});break;case"vendor_address_1":case"vendor_address_2":case"vendor_phone":case"vendor_country":i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""});break;case"vendor_state":-1<jQuery.inArray("vendor_country",jQuery.map(i,function(e){return e.type}))?i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""}):alert(vendor_registration_param.lang.need_country_dependancy);break;case"vendor_city":case"vendor_postcode":case"vendor_paypal_email":default:i.push({id:l,type:e,label:a,hidden:!1,partial:e+".html",placeholder:"",required:!1,cssClass:""})}r.setField(i)},e.togglePostbox=function(){""===e.postboxClass?e.postboxClass="closed":e.postboxClass=""},e.togglevendorStoreField=function(){""===e.vendorStoreFieldClass?e.vendorStoreFieldClass="closed":e.vendorStoreFieldClass=""}}]),app.controller("postbox_content",["$scope","$http","vendor_registration_service",function(r,a,t){var l=t.getField();r.fields=l,r.partialUrl=vendor_registration_param.partials,r.showSaveSpinner=!1,r.togglePostboxField=function(e){r.fields[e].hidden?r.fields[e].hidden=!1:r.fields[e].hidden=!0},r.removeFormField=function(e,a){a.preventDefault(),l.splice(e,1),t.setField(l)},r.addSelectBoxOption=function(e,a){a.preventDefault();var t=r.fields[e].options.length+1;r.fields[e].options.push({value:"option"+t,label:"Option "+t,selected:!1})},r.removeSelectboxOption=function(e,a,t){t.preventDefault(),r.fields[e].options.splice(a,1)},r.fieldSortableOptions={stop:function(e,a){}},r.listOnchange=function(t,l){console.log(r.fields[t].options),angular.forEach(r.fields[t].options,function(e,a){a!==l&&(r.fields[t].options[a].selected=!1)})},r.saveFormData=function(){r.showSaveSpinner=!0;var e=jQuery.param({action:"wcmp_save_vendor_registration_form",form_data:JSON.stringify(r.fields)});a.post(vendor_registration_param.ajax_url,e,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8;"}}).success(function(e,a,t,l){r.showSaveSpinner=!1}).error(function(e,a,t,l){console.log(e),r.showSaveSpinner=!1})}}]);