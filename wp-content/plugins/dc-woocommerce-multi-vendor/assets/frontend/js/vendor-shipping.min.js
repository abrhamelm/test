!function(s){if("undefined"==typeof wcmp_vendor_shipping_script_data)return;var i=i||{build:function(){this.init(),this.bindEvents()},init:function(){this.modify_shipping_methods=".modify-shipping-methods",this.vendor_shipping_methods="#vendor-shipping-methods",this.shipping_by_zone_holder="#wcmp_settings_form_shipping_by_zone",this.shipping_zone_table=this.shipping_by_zone_holder+" .shipping-zone-table",this.shipping_zone_list=".shipping-zone-list",this.shipping_method_manage_form="#wcmp_shipping_method_manage_form",this.show_shipping_methods=this.vendor_shipping_methods+" .show-shipping-methods",this.add_shipping_methods=this.vendor_shipping_methods+" .add-shipping-method",this.edit_shipping_method=this.vendor_shipping_methods+" .edit-shipping-method",this.update_shipping_method=this.vendor_shipping_methods+" .update-shipping-method",this.delete_shipping_method=this.vendor_shipping_methods+" .delete-shipping-method",this.limit_zone_location=this.vendor_shipping_methods+" #limit_zone_location",this.method_status=this.vendor_shipping_methods+" .method-status",this.modal_close_link=".modal-close-link",this.modal_dialog=".wcmp-modal-dialog"},bindEvents:function(){s(this.modify_shipping_methods).on("click",this.modifyShippingMethods.bind(this)),s(document).on("zone_settings_loaded",this.zoneLoadedEvents.bind(this)),s(document.body).on("change",".wc-shipping-zone-method-selector select",this.onChangeShippingMethodSelector),s(document).delegate(this.shipping_zone_list,"click",this.goToShippingZones.bind(this)),s(document).delegate(this.show_shipping_methods,"click",this.showShippingMethods.bind(this)),s(document).delegate(this.add_shipping_methods,"click",this.addShippingMethod.bind(this)),s(document).delegate(this.edit_shipping_method,"click",this.editShippingMethod.bind(this)),s(document).delegate(this.update_shipping_method,"click",this.updateShippingMethod.bind(this)),s(document).delegate(this.delete_shipping_method,"click",this.deleteShippingMethod.bind(this)),s(document).delegate(this.limit_zone_location,"click",this.limitZoneLocation.bind(this)),s(document).delegate(this.method_status,"change",this.toggleShippingMethod.bind(this)),s(document).delegate(this.modal_close_link,"click",this.closeModal.bind(this))},modifyShippingMethods:function(i,e){var t=this;s("#wcmp_settings_form_shipping_by_zone").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),void 0!==i&&(i.preventDefault(),e=s(i.currentTarget).data("zoneId"));s.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:{action:"wcmp-get-shipping-methods-by-zone",zoneID:e},success:function(i){s(t.vendor_shipping_methods).html(i.data.html).show(),s(t.shipping_zone_table).hide()},complete:function(){s("#wcmp_settings_form_shipping_by_zone").unblock(),s(document).trigger("zone_settings_loaded")}})},zoneLoadedEvents:function(i){this.limitZoneLocation(i)},goToShippingZones:function(i){i.preventDefault(),s(this.vendor_shipping_methods).html("").hide(),s(this.shipping_zone_table).show(),window.location.reload()},onChangeShippingMethodSelector:function(){var i=s(this).find("option:selected").data("description");s(this).parents(".wc-shipping-zone-method-selector").find(".wc-shipping-zone-method-description").html(""),s(this).parents(".wc-shipping-zone-method-selector").find(".wc-shipping-zone-method-description").html(i)},showShippingMethods:function(i){i.preventDefault(),s("#wcmp_shipping_method_add_container").show(),s("#wcmp_shipping_method_add_container "+this.modal_dialog).show()},addShippingMethod:function(i){i.preventDefault();var e=this,t=s("#zone_id").val(),n=s("#shipping_method option:selected").val();if(""==t);else if(""==n);else{var o={action:"wcmp-add-shipping-method",zoneID:t,method:n};s("#wcmp_shipping_method_add_button").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});s.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:o,success:function(i){i.success&&(s("#wcmp_shipping_method_add_container").hide(),e.modifyShippingMethods(undefined,t))}})}},editShippingMethod:function(i){i.preventDefault(),s(".wcmp-zone-method-content").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});var e=s(i.currentTarget).parents(".edit_del_actions").data("instance_id"),t=s(i.currentTarget).parents(".edit_del_actions").data("method_id"),n=s(i.currentTarget).parents(".edit_del_actions").data("zone_id"),o={action:"wcmp-vendor-configure-shipping-method",zoneId:n,instanceId:e,methodId:t};s.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:o,success:function(i){i&&(s(".wcmp-zone-method-content").unblock(),s("#wcmp_shipping_method_edit_container #method_id_selected").val(t),s("#wcmp_shipping_method_edit_container #instance_id_selected").val(e),s("#wcmp_shipping_method_edit_container #zone_id_selected").val(n),s("#shipping-form-fields").html(i.settings_html),s("#wcmp_shipping_method_edit_container").show())}})},updateShippingMethod:function(i){i.preventDefault();var e=this,t=s("#wcmp_shipping_method_edit_container #method_id_selected").val(),n=s("#wcmp_shipping_method_edit_container #instance_id_selected").val(),o=s("#zone_id").val(),d={action:"wcmp-update-shipping-method",zoneID:o,args:{instance_id:n,zone_id:o,method_id:t,settings:s("#wcmp-vendor-edit-shipping-form").serializeArray()}};s("#wcmp_shipping_method_edit_button").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});s.ajax({method:"POST",url:wcmp_vendor_shipping_script_data.ajaxurl,data:d,success:function(i){i.success?e.modifyShippingMethods(undefined,o):alert(i.data)}})},deleteShippingMethod:function(i){i.preventDefault();var e=this;if(confirm(wcmp_vendor_shipping_script_data.i18n.deleteShippingMethodConfirmation)){var t=s(i.target).is(this.delete_shipping_method)?i.target:s(i.target).closest(this.delete_shipping_method),n=s(t).parents(".edit_del_actions").attr("data-instance_id"),o=s("#zone_id").val(),d=d={action:"wcmp-delete-shipping-method",zoneID:o,instance_id:n};if(""==o);else if(""==n);else s.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:d,success:function(i){i.success?e.modifyShippingMethods(undefined,o):alert(resp.data)}})}},limitZoneLocation:function(i){s("#limit_zone_location").is(":checked")?s(".hide_if_zone_not_limited").show():s(".hide_if_zone_not_limited").hide()},toggleShippingMethod:function(i){i.preventDefault();var e=s(i.target).is(":checked"),t=s(i.target).val(),n=s("#zone_id").val(),o={action:"wcmp-toggle-shipping-method",zoneID:n,instance_id:t,checked:e};if(""==n);else if(""==t);else{s(".wcmp-container").block({message:null,overlayCSS:{background:"#fff",opacity:.6}});s.ajax({method:"post",url:wcmp_vendor_shipping_script_data.ajaxurl,data:o,success:function(i){i.success?s(".wcmp-container").unblock():(s(".wcmp-container").unblock(),alert(i.data))}})}},closeModal:function(i){i.preventDefault();var e=s(i.target).parents(this.modal_dialog);e.length&&(e.hide(),s(this.modal_dialog).hide())}};s(i.build.bind(i))}(jQuery);