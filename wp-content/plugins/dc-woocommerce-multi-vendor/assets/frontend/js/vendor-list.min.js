!function(i){if("undefined"==typeof wcmp_vendor_list_script_data)return;var s,c,p=[];google.maps.event.addDomListener(window,"load",function r(){var t=wcmp_vendor_list_script_data.map_data.map_options;if("1"==wcmp_vendor_list_script_data.map_data.map_style){wcmp_vendor_list_script_data.map_data.map_options.mapTypeControlOptions.mapTypeIds.push("wcmp_map_style");var e=wcmp_vendor_list_script_data.map_data.map_style_data,o=new google.maps.StyledMapType(e,{name:wcmp_vendor_list_script_data.map_data.map_style_title})}var n=new google.maps.Map(document.getElementById("wcmp-vendor-list-map"),t);function a(t,e,o,a){if(-1==a)alert(wcmp_vendor_list_script_data.lang.geolocation_doesnt_support);else switch(a.code){case a.PERMISSION_DENIED:alert(wcmp_vendor_list_script_data.lang.geolocation_permission_denied);break;case a.POSITION_UNAVAILABLE:alert(wcmp_vendor_list_script_data.lang.geolocation_position_unavailable);break;case a.TIMEOUT:alert(wcmp_vendor_list_script_data.lang.geolocation_timeout);break;case a.UNKNOWN_ERROR:alert(wcmp_vendor_list_script_data.lang.geolocation_service_failed)}e.setPosition(o),e.setContent(t?wcmp_vendor_list_script_data.lang.geolocation_service_failed:wcmp_vendor_list_script_data.lang.geolocation_doesnt_support),e.open(n)}if("1"==wcmp_vendor_list_script_data.map_data.map_style&&(n.mapTypes.set("wcmp_map_style",o),n.setMapTypeId("wcmp_map_style")),s=new google.maps.InfoWindow,c=new google.maps.LatLngBounds,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var e={lat:t.coords.latitude,lng:t.coords.longitude};i("#wcmp_vlist_center_lat").val(t.coords.latitude),i("#wcmp_vlist_center_lng").val(t.coords.longitude),n.setCenter(e),n.fitBounds(c)},function(t){a(!0,s,n.getCenter(),t)}):a(!1,s,n.getCenter(),-1),wcmp_vendor_list_script_data.stores.forEach(function(t){!function o(t){c.extend(new google.maps.LatLng(t.location.lat,t.location.lng));var e=new google.maps.Marker({map:n,icon:wcmp_vendor_list_script_data.map_data.marker_icon,position:new google.maps.LatLng(t.location.lat,t.location.lng),title:t.store_name});google.maps.event.addListener(e,"click",function(){s.setContent(t.info_html),s.open(n,e)}),p.push(e)}(t)}),wcmp_vendor_list_script_data.autocomplete){var _=document.getElementById("locationText"),l=new google.maps.places.Autocomplete(_);l.addListener("place_changed",function(){var t=l.getPlace();t.geometry?(t.geometry.viewport?n.fitBounds(t.geometry.viewport):(n.setCenter(t.geometry.location),n.setZoom(17)),i("#wcmp_vlist_center_lat").val(t.geometry.location.lat()),i("#wcmp_vlist_center_lng").val(t.geometry.location.lng())):window.alert("Autocomplete returned place contains no geometry")})}else i("#locationText").on("input",function(){var t=i(this).val();(new google.maps.Geocoder).geocode({address:t},function(t,e){if(e==google.maps.GeocoderStatus.OK){var o=t[0].geometry.location;n.setCenter(o),i("#wcmp_vlist_center_lat").val(o.lat()),i("#wcmp_vlist_center_lng").val(o.lng())}})})})}(jQuery);